<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEPFAR Impact Animation</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }
        
        .button-container {
            position: absolute;
            top: 10px;
            right: 20px;
            z-index: 10;
        }
        
        .title {
            font-size: 36px;
            font-weight: bold;
            margin: 20px 0 10px;
            text-align: center;
        }
        
        .subtitle {
            font-size: 24px;
            color: #cccccc;
            margin-bottom: 50px;
            text-align: center;
        }
        
        .animation-container {
            position: relative;
            width: 100%;
            height: 300px;
            margin-top: 0;
        }
        
        .custom-button {
            background-color: #D2042D;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 0 5px;
        }
        
        .custom-button:hover {
            background-color: #A00;
        }
        
        .reset-button {
            background-color: #333;
            display: none;
        }
        
        .reset-button:hover {
            background-color: #555;
        }
        
        /* SVG styles */
        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: visible;
        }
        
        .flow-path {
            fill: none;
            stroke-width: 3px;
            stroke-dasharray: 0;
            stroke-dashoffset: 0;
            opacity: 0;
        }
        
        .white-flow {
            stroke: white;
        }
        
        .red-flow {
            stroke: #D2042D;
        }
        
        .axis-label {
            font-size: 14px;
            fill: white;
            text-anchor: middle;
        }
        
        .axis-title {
            font-size: 16px;
            font-weight: bold;
            fill: white;
            text-anchor: middle;
        }
        
        .axis-line {
            stroke: #555555;
            stroke-width: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="button-container">
            <button id="play-button" class="custom-button">See PEPFAR's Impact</button>
            <button id="reset-button" class="custom-button reset-button">Reset</button>
        </div>
        
        <div class="title">PEPFAR IMPACT</div>
        <div class="subtitle">2003-2024</div>
        
        <div class="animation-container">
            <svg id="flow-svg" viewBox="0 0 800 300" preserveAspectRatio="xMidYMid meet">
                <!-- Timeline (X-axis) -->
                <line x1="20" y1="250" x2="800" y2="250" stroke="#555555" stroke-width="2" />
                
                <!-- X-axis title -->
                <text x="410" y="285" font-size="16" font-weight="bold" fill="white" text-anchor="middle" class="axis-title">Lives Saved (Millions)</text>
                
                <!-- X-axis labels with corresponding numbers -->
                <text x="20" y="270" font-size="12" fill="white" text-anchor="middle" class="axis-label">0</text>
                <text x="160" y="270" font-size="12" fill="white" text-anchor="middle" class="axis-label">5</text>
                <text x="320" y="270" font-size="12" fill="white" text-anchor="middle" class="axis-label">10</text>
                <text x="480" y="270" font-size="12" fill="white" text-anchor="middle" class="axis-label">15</text>
                <text x="640" y="270" font-size="12" fill="white" text-anchor="middle" class="axis-label">20</text>
                <text x="800" y="270" font-size="12" fill="white" text-anchor="middle" class="axis-label">25</text>
                
                <!-- Scale markers -->
                <circle cx="20" cy="250" r="3" fill="white" />
                <circle cx="160" cy="250" r="3" fill="white" />
                <circle cx="320" cy="250" r="3" fill="white" />
                <circle cx="480" cy="250" r="3" fill="white" />
                <circle cx="640" cy="250" r="3" fill="white" />
                <circle cx="800" cy="250" r="3" fill="white" />
                
                <!-- Modified flow paths to align with the x-axis values -->
                <!-- Flow 1: 6 million (about 30% between 5-10 million markers) -->
                <path id="flow1" class="flow-path white-flow" 
                      d="M 20,250 C 90,220 140,190 240,170" 
                      stroke-dasharray="350" stroke-dashoffset="350" />
                
                <!-- Flow 2: 7.8 million (about 56% between 5-10 million markers) -->
                <path id="flow2" class="flow-path red-flow" 
                      d="M 20,250 C 110,210 160,150 250,130" 
                      stroke-dasharray="400" stroke-dashoffset="400" />
                
                <!-- Flow 3: 19 million (about 95% between 15-20 million markers) -->
                <path id="flow3" class="flow-path white-flow" 
                      d="M 20,250 C 200,170 400,100 630,60" 
                      stroke-dasharray="1000" stroke-dashoffset="1000" />
                
                <!-- Flow 4: 26 million (slightly beyond the 25 million marker) -->
                <path id="flow4" class="flow-path red-flow" 
                      d="M 20,250 C 230,130 450,60 820,30" 
                      stroke-dasharray="1200" stroke-dashoffset="1200" />
                
                <!-- Milestone texts - adjusted to align with x-axis values -->
                <g id="milestone1" opacity="0">
                    <text x="240" y="160" font-size="32" font-weight="bold" fill="white" text-anchor="middle">6,000,000</text>
                    <text x="240" y="180" font-size="14" fill="white" text-anchor="middle">POPULATION OF MARYLAND</text>
                </g>
                
                <g id="milestone2" opacity="0">
                    <text x="250" y="110" font-size="38" font-weight="bold" fill="#D2042D" text-anchor="middle">7,800,000</text>
                    <text x="250" y="130" font-size="16" fill="#D2042D" text-anchor="middle">BABIES PROTECTED FROM HIV</text>
                </g>
                
                <g id="milestone3" opacity="0">
                    <text x="630" y="40" font-size="32" font-weight="bold" fill="white" text-anchor="middle">19,000,000</text>
                    <text x="630" y="60" font-size="14" fill="white" text-anchor="middle">POPULATION OF SENEGAL</text>
                </g>
                
                <g id="milestone4" opacity="0">
                    <text x="700" y="-20" font-size="40" font-weight="bold" fill="#D2042D" text-anchor="middle">26,000,000</text>
                    <text x="700" y="5" font-size="16" fill="#D2042D" text-anchor="middle">LIVES SAVED THROUGH PEPFAR</text>
                </g>
            </svg>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get elements
            const playButton = document.getElementById('play-button');
            const resetButton = document.getElementById('reset-button');
            
            // Get flows
            const flows = [
                document.getElementById('flow1'),
                document.getElementById('flow2'),
                document.getElementById('flow3'),
                document.getElementById('flow4')
            ];
            
            const milestones = [
                document.getElementById('milestone1'),
                document.getElementById('milestone2'),
                document.getElementById('milestone3'),
                document.getElementById('milestone4')
            ];
            
            // Animation durations in milliseconds
            const durations = [1000, 1200, 1500, 1800];
            
            // Function to animate a flow
            function animateFlow(flow, duration) {
                return new Promise(resolve => {
                    // Make flow visible
                    flow.style.opacity = "1";
                    
                    // Get the path length
                    const length = flow.getTotalLength ? flow.getTotalLength() : parseFloat(flow.getAttribute('stroke-dasharray'));
                    
                    // Set initial dashoffset to hide the path
                    flow.style.strokeDasharray = length;
                    flow.style.strokeDashoffset = length;
                    
                    // Force a reflow so the animation works
                    flow.getBoundingClientRect();
                    
                    // Animate the flow
                    flow.style.transition = `stroke-dashoffset ${duration}ms ease-out`;
                    flow.style.strokeDashoffset = '0';
                    
                    // Resolve the promise when animation is done
                    setTimeout(resolve, duration);
                });
            }
            
            // Function to play the animation
            async function playAnimation() {
                // Hide play button, show reset button
                playButton.style.display = 'none';
                resetButton.style.display = 'inline-block';
                
                // Animate each flow with delay and show milestones
                for (let i = 0; i < flows.length; i++) {
                    await animateFlow(flows[i], durations[i]);
                    milestones[i].style.opacity = '1';
                    
                    // Add a small delay before the next flow
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
            }
            
            // Function to reset the animation
            function resetAnimation() {
                // Hide reset button, show play button
                resetButton.style.display = 'none';
                playButton.style.display = 'inline-block';
                
                // Reset all flows
                flows.forEach((flow, index) => {
                    // Hide the flow
                    flow.style.opacity = "0";
                    
                    const length = flow.getTotalLength ? flow.getTotalLength() : parseFloat(flow.getAttribute('stroke-dasharray'));
                    
                    // Remove transition to make reset instant
                    flow.style.transition = 'none';
                    flow.style.strokeDashoffset = length;
                    
                    // Force a reflow
                    flow.getBoundingClientRect();
                    
                    // Reset milestone opacity
                    milestones[index].style.opacity = '0';
                });
            }
            
            // Add event listeners to buttons
            playButton.addEventListener('click', playAnimation);
            resetButton.addEventListener('click', resetAnimation);
        });
    </script>
</body>
</html>